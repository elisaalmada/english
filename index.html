<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Journey - Seu Guia para o Inglês</title>
    <!-- Incluindo Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuração da fonte Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Cor de fundo suave */
        }
        /* Estilos para ocultar seções por padrão */
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        /* Estilo para links ativos no menu lateral */
        .nav-link.active {
            background-color: #e0e7ff; /* light-blue-100 */
            color: #3b82f6; /* blue-500 */
            font-weight: 600;
        }
        /* Estilo para conteúdo de exercício individual */
        .individual-exercise-content {
            display: none; /* Esconde todos os exercícios individuais por padrão */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <div class="flex flex-1 flex-col md:flex-row bg-gray-50 rounded-lg shadow-xl m-4 md:m-8 overflow-hidden">
        <!-- Sidebar Menu -->
        <aside class="w-full md:w-1/4 bg-blue-700 text-white p-6 md:p-8 flex flex-col rounded-t-lg md:rounded-l-lg md:rounded-tr-none shadow-lg">
            <h1 class="text-3xl font-bold mb-8 text-center md:text-left">English Journey</h1>
            <nav>
                <ul class="space-y-4">
                    <li><a href="#exercises" class="nav-link block p-3 rounded-lg hover:bg-blue-600 transition-colors duration-200 active-link">Exercícios Interativos</a></li>
                    <li><a href="#about-me" class="nav-link block p-3 rounded-lg hover:bg-blue-600 transition-colors duration-200">Quem Sou Eu</a></li>
                    <li><a href="#how-classes-work" class="nav-link block p-3 rounded-lg hover:bg-blue-600 transition-colors duration-200">Como Funcionam as Aulas</a></li>
                    <li><a href="#proficiency-test" class="nav-link block p-3 rounded-lg hover:bg-blue-600 transition-colors duration-200">Teste de Nível</a></li>
                    <li><a href="#media-recommendations" class="nav-link block p-3 rounded-lg hover:bg-blue-600 transition-colors duration-200">Recomendações de Mídia</a></li>
                    <li><a href="#book-a-class" class="nav-link block p-3 rounded-lg hover:bg-blue-600 transition-colors duration-200">Agende Sua Aula</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 p-6 md:p-10 bg-white rounded-b-lg md:rounded-r-lg md:rounded-bl-none overflow-y-auto">

            <!-- Section 1: Interactive Exercises -->
            <section id="exercises" class="content-section active">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Exercícios Interativos</h2>
                <p class="text-gray-700 mb-6 leading-relaxed">
                    Aqui você encontrará diversos exercícios interativos para praticar seu inglês. O feedback é automático para que você possa aprender com seus erros. Você pode copiar seus resultados, incluindo as correções e explicações, para compartilhar ou revisar.
                </p>

                <!-- List of Exercises View -->
                <div id="exercise-list-view">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Escolha um exercício:</h3>
                    <ul class="space-y-3">
                        <li><a href="#exercise-say-tell" class="exercise-select-link block p-3 rounded-lg hover:bg-blue-100 text-blue-700 font-medium transition-colors duration-200">Exercício: Say, Tell, Speak, Talk</a></li>
                        <li><a href="#exercise-do-does" class="exercise-select-link block p-3 rounded-lg hover:bg-blue-100 text-blue-700 font-medium transition-colors duration-200">Exercício: Do vs. Does</a></li>
                        <!-- Adicione mais links de exercícios aqui com seus respectivos IDs -->
                    </ul>
                    <div class="bg-gray-100 p-6 rounded-lg mt-8 border-l-4 border-gray-300">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Como adicionar mais exercícios:</h3>
                        <p class="text-gray-700 leading-relaxed">
                            Para adicionar um novo exercício, crie um novo `div` com a classe `individual-exercise-content` e um `id` único (ex: `id="exercise-novo-topico"`). Adicione um link para ele na lista de exercícios (`&lt;ul id="exercise-list-view"&gt;`). Certifique-se de que cada exercício tenha **IDs de inputs e botões únicos** (ex: `id="novotopico-q1"`, `data-exercise-id="novo-topico"`) e de adicionar os dados de respostas e explicações ao objeto `allExerciseData` no JavaScript.
                        </p>
                        <p class="text-gray-700 leading-relaxed mt-4">
                            Lembre-se de que o site é leve e não exige login ou banco de dados.
                        </p>
                    </div>
                </div>

                <!-- Individual Exercise View Wrapper -->
                <div id="individual-exercise-view" class="hidden">
                    <button id="back-to-exercise-list-btn" class="mb-6 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors duration-200 shadow-sm">
                        &larr; Voltar para a lista de exercícios
                    </button>

                    <!-- Example Exercise 1 - Say/Tell/Speak/Talk -->
                    <div id="exercise-say-tell" class="individual-exercise-content bg-blue-50 p-6 rounded-lg shadow-md mb-8">
                        <h3 class="text-xl font-semibold text-blue-800 mb-4">Exercício: Say, Tell, Speak, Talk</h3>
                        <p class="text-gray-700 mb-4">Preencha as lacunas com a forma correta de **say, tell, speak, ou talk**.</p>

                        <div class="mb-4">
                            <label for="saytell-q1" class="block text-gray-700 font-medium mb-2">1. Can you please ______ me your name again?</label>
                            <input type="text" id="saytell-q1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>

                        <div class="mb-4">
                            <label for="saytell-q2" class="block text-gray-700 font-medium mb-2">2. She always ______ the truth.</label>
                            <input type="text" id="saytell-q2" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>

                        <div class="mb-4">
                            <label for="saytell-q3" class="block text-gray-700 font-medium mb-2">3. I need to ______ with my manager about this project.</label>
                            <input type="text" id="saytell-q3" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>

                        <div class="mb-4">
                            <label for="saytell-q4" class="block text-gray-700 font-medium mb-2">4. He ______ "hello" as he walked past.</label>
                            <input type="text" id="saytell-q4" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>

                        <button data-exercise-id="say-tell" class="check-exercise-button bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors duration-200 mr-2 shadow-md">Verificar Respostas</button>
                        <button data-exercise-id="say-tell" class="copy-exercise-results-button bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors duration-200 shadow-md">Copiar Resultados</button>

                        <div class="exercise-feedback mt-6 p-4 bg-white rounded-lg border border-gray-200 text-gray-800 hidden"></div>
                        <div class="exercise-copy-message mt-4 text-sm text-green-700 hidden"></div>
                    </div>

                    <!-- New Exercise Example 2 - Do vs. Does -->
                    <div id="exercise-do-does" class="individual-exercise-content bg-blue-50 p-6 rounded-lg shadow-md mb-8">
                        <h3 class="text-xl font-semibold text-blue-800 mb-4">Exercício: Do vs. Does</h3>
                        <p class="text-gray-700 mb-4">Preencha as lacunas com a forma correta de **do ou does**.</p>

                        <div class="mb-4">
                            <label for="dodoes-q1" class="block text-gray-700 font-medium mb-2">1. What ______ you usually do on weekends?</label>
                            <input type="text" id="dodoes-q1" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>

                        <div class="mb-4">
                            <label for="dodoes-q2" class="block text-gray-700 font-medium mb-2">2. My sister ______ not like coffee.</label>
                            <input type="text" id="dodoes-q2" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>

                        <div class="mb-4">
                            <label for="dodoes-q3" class="block text-gray-700 font-medium mb-2">3. ______ he speak French?</label>
                            <input type="text" id="dodoes-q3" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                        </div>

                        <button data-exercise-id="do-does" class="check-exercise-button bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors duration-200 mr-2 shadow-md">Verificar Respostas</button>
                        <button data-exercise-id="do-does" class="copy-exercise-results-button bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors duration-200 shadow-md">Copiar Resultados</button>

                        <div class="exercise-feedback mt-6 p-4 bg-white rounded-lg border border-gray-200 text-gray-800 hidden"></div>
                        <div class="exercise-copy-message mt-4 text-sm text-green-700 hidden"></div>
                    </div>

                </div>
            </section>

            <!-- Section 2: About Me -->
            <section id="about-me" class="content-section">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Quem Sou Eu</h2>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md">
                    <!-- Recommended: Add your photo here -->
                    <!-- <img src="https://placehold.co/200x200/cccccc/ffffff?text=Sua+Foto" alt="Sua Foto" class="rounded-full w-48 h-48 object-cover mx-auto mb-6 shadow-lg"> -->
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Olá! Sou seu professor de inglês online, apaixonado por ajudar profissionais brasileiros a dominar o inglês para suas carreiras e vidas. Com anos de experiência em ensino de idiomas, meu objetivo é tornar o aprendizado relevante e envolvente.
                    </p>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Minha formação em [Mencione sua área de formação aqui, ex: Linguística, Educação, Letras] e minha vivência com as necessidades do mercado de trabalho brasileiro me permitem criar aulas focadas nas suas realidades, seja para conversas em reuniões, apresentações, consultas médicas ou preparação para exames de proficiência.
                    </p>
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Além de ensinar, adoro discutir sobre viagens, turismo e fitness, temas que muitos dos meus alunos também se interessam! Minha metodologia é construída sobre a ideia de que o aprendizado deve ser uma ponte para suas metas, e não um obstáculo. Valorizo a prática contextualizada e a construção de uma base sólida para a comunicação eficaz.
                    </p>
                    <p class="text-gray-700 leading-relaxed">
                        <strong class="font-semibold">Contato:</strong> [Seu e-mail] | [Seu WhatsApp (opcional)]
                    </p>
                </div>
            </section>

            <!-- Section 3: How Classes Work -->
            <section id="how-classes-work" class="content-section">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Como Funcionam as Aulas</h2>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md">
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Minhas aulas são projetadas para serem flexíveis e totalmente personalizadas às suas necessidades, utilizando ferramentas modernas para um aprendizado eficaz. Veja como elas geralmente funcionam:
                    </p>
                    <ul class="list-disc list-inside space-y-3 text-gray-700 mb-4">
                        <li>
                            <strong class="font-semibold">Personalização:</strong> Cada plano de aula é criado especificamente para você, levando em conta seu nível atual, seus objetivos profissionais (medicina, RH, negócios, etc.) e seus interesses pessoais (viagens, fitness, etc.).
                        </li>
                        <li>
                            <strong class="font-semibold">Estrutura das Aulas:</strong> Geralmente, as aulas seguem um formato dinâmico. Começamos com um slide explicativo sobre o tópico do dia. Você terá tempo para ler, tirar dúvidas sobre vocabulário e conceitos.
                        </li>
                        <li>
                            <strong class="font-semibold">Interação e Compreensão:</strong> Após a explicação, brevemente conversamos para verificar sua compreensão sem a necessidade de ler o slide novamente. Isso ajuda a fortalecer suas habilidades de escuta e fala.
                        </li>
                        <li>
                            <strong class="font-semibold">Prática Contextualizada:</strong> Em seguida, apresentamos um novo slide com perguntas ou atividades. Além das perguntas escritas, faço perguntas adicionais com base nas suas respostas e na nossa conversa, incentivando o pensamento crítico e a aplicação do conteúdo.
                        </li>
                        <li>
                            <strong class="font-semibold">Recursos Digitais:</strong> Utilizamos o Google Classroom para organizar o material, Google Docs e Slides para o conteúdo das aulas, Google Meet para nossas sessões ao vivo e YouTube para recursos complementares.
                        </li>
                        <li>
                            <strong class="font-semibold">Foco na Realidade:</strong> Nosso objetivo é conectar o inglês à sua realidade. Se você é da área de saúde, podemos simular consultas; se for de negócios, podemos praticar apresentações ou reuniões. Isso torna o aprendizado mais significativo e aplicável.
                        </li>
                    </ul>
                    <p class="text-gray-700 leading-relaxed">
                        Estou aqui para te guiar em sua jornada de fluência, tornando cada aula um passo concreto em direção aos seus objetivos.
                    </p>
                </div>
            </section>

            <!-- Section 4: Proficiency Test -->
            <section id="proficiency-test" class="content-section">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Teste de Nível de Proficiência</h2>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md">
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Faça este teste rápido para ter uma ideia do seu nível de proficiência em inglês. Ao final, você poderá ver seus resultados e copiá-los para compartilhar ou guardar.
                    </p>
                    <form id="proficiency-quiz">
                        <!-- Question 1 -->
                        <div class="mb-6 bg-white p-5 rounded-lg border border-gray-200">
                            <p class="font-semibold text-gray-800 mb-3">1. He ______ to the gym every day.</p>
                            <div class="space-y-2">
                                <label class="block">
                                    <input type="radio" name="q1" value="goes" class="mr-2"> goes
                                </label>
                                <label class="block">
                                    <input type="radio" name="q1" value="go" class="mr-2"> go
                                </label>
                                <label class="block">
                                    <input type="radio" name="q1" value="going" class="mr-2"> going
                                </label>
                            </div>
                        </div>

                        <!-- Question 2 -->
                        <div class="mb-6 bg-white p-5 rounded-lg border border-gray-200">
                            <p class="font-semibold text-gray-800 mb-3">2. "Could you please ______ me the time?"</p>
                            <div class="space-y-2">
                                <label class="block">
                                    <input type="radio" name="q2" value="say" class="mr-2"> say
                                </label>
                                <label class="block">
                                    <input type="radio" name="q2" value="tell" class="mr-2"> tell
                                </label>
                                <label class="block">
                                    <input type="radio" name="q2" value="speak" class="mr-2"> speak
                                </label>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="mb-6 bg-white p-5 rounded-lg border border-gray-200">
                            <p class="font-semibold text-gray-800 mb-3">3. They ______ their homework yet.</p>
                            <div class="space-y-2">
                                <label class="block">
                                    <input type="radio" name="q3" value="haven't finished" class="mr-2"> haven't finished
                                </label>
                                <label class="block">
                                    <input type="radio" name="q3" value="didn't finish" class="mr-2"> didn't finish
                                </label>
                                <label class="block">
                                    <input type="radio" name="q3" value="not finished" class="mr-2"> not finished
                                </label>
                            </div>
                        </div>

                        <!-- Question 4 -->
                        <div class="mb-6 bg-white p-5 rounded-lg border border-gray-200">
                            <p class="font-semibold text-gray-800 mb-3">4. If I ______ a bird, I ______ fly.</p>
                            <div class="space-y-2">
                                <label class="block">
                                    <input type="radio" name="q4" value="was / would" class="mr-2"> was / would
                                </label>
                                <label class="block">
                                    <input type="radio" name="q4" value="were / would" class="mr-2"> were / would
                                </label>
                                <label class="block">
                                    <input type="radio" name="q4" value="am / will" class="mr-2"> am / will
                                </label>
                            </div>
                        </div>

                        <!-- Question 5 -->
                        <div class="mb-6 bg-white p-5 rounded-lg border border-gray-200">
                            <p class="font-semibold text-gray-800 mb-3">5. She's a doctor, ______?</p>
                            <div class="space-y-2">
                                <label class="block">
                                    <input type="radio" name="q5" value="isn't she" class="mr-2"> isn't she
                                </label>
                                <label class="block">
                                    <input type="radio" name="q5" value="doesn't she" class="mr-2"> doesn't she
                                </label>
                                <label class="block">
                                    <input type="radio" name="q5" value="is she" class="mr-2"> is she
                                </label>
                            </div>
                        </div>


                        <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors duration-200 mr-2 shadow-md">Verificar Teste</button>
                        <button type="button" id="copy-test-results" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors duration-200 shadow-md hidden">Copiar Resultados</button>
                    </form>

                    <div id="test-results" class="mt-6 p-4 bg-white rounded-lg border border-gray-200 text-gray-800 hidden">
                        <!-- Test results will be displayed here -->
                    </div>
                    <div id="test-copy-message" class="mt-4 text-sm text-green-700 hidden">
                        Resultados copiados para a área de transferência!
                    </div>
                </div>
            </section>

            <!-- Section 5: Media Recommendations -->
            <section id="media-recommendations" class="content-section">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Recomendações de Mídia</h2>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md">
                    <p class="text-gray-700 mb-4 leading-relaxed">
                        Aprender inglês vai além da sala de aula! Aqui estão algumas recomendações de mídias que podem te ajudar a imergir no idioma e praticar de forma divertida:
                    </p>
                    <h3 class="text-xl font-semibold text-blue-800 mb-3">Canais do YouTube:</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
                        <li>**BBC Learning English:** Excelente para gramática, vocabulário e pronúncia.</li>
                        <li>**English with Lucy:** Dicas práticas, sotaque britânico e muita clareza.</li>
                        <li>**Rachel's English:** Foco em pronúncia e redução de sotaque para falantes de inglês americano.</li>
                        <li>**VOA Learning English:** Notícias em inglês simplificado, ótimo para compreensão auditiva.</li>
                        <!-- Adicione mais canais aqui -->
                    </ul>

                    <h3 class="text-xl font-semibold text-blue-800 mb-3">Contas de Instagram:</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
                        <li>**@inglesnapratica:** Dicas rápidas, frases úteis e vocabulário do dia a dia.</li>
                        <li>**@teacher_gabriel_english:** Conteúdo divertido e interativo.</li>
                        <li>**@learnenglish:** Postagens diárias com novas palavras e expressões.</li>
                        <!-- Adicione mais contas aqui -->
                    </ul>

                    <h3 class="text-xl font-semibold text-blue-800 mb-3">Filmes e Séries (com legendas em inglês ou sem):</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
                        <li>**Friends:** Ótimo para vocabulário coloquial e situações cotidianas.</li>
                        <li>**The Office (US):** Humor de escritório e diálogos naturais.</li>
                        <li>**The Crown:** Para quem gosta de história e quer um sotaque britânico mais formal.</li>
                        <li>**Documentários da Netflix/Discovery Channel:** Para vocabulário mais específico e temas variados.</li>
                        <!-- Adicione mais filmes/séries aqui -->
                    </ul>

                    <h3 class="text-xl font-semibold text-blue-800 mb-3">Podcasts:</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>**English as a Second Language Podcast:** Para níveis intermediário e avançado, com transcrições.</li>
                        <li>**Luke's English Podcast:** Tópicos variados, com humor e profundidade, sotaque britânico.</li>
                        <!-- Adicione mais podcasts aqui -->
                    </ul>
                </div>
            </section>

            <!-- Section 6: Book a Class -->
            <section id="book-a-class" class="content-section">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">Agende Sua Aula Experimental!</h2>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md text-center">
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        Pronto para dar o próximo passo na sua jornada de aprendizado de inglês? Agende sua aula experimental gratuita agora mesmo! Vamos conversar sobre seus objetivos e como posso te ajudar a alcançá-los.
                    </p>
                    <a href="https://calendar.google.com/calendar/u/0/appointments/s/YOUR_CALENDAR_LINK" target="_blank" class="inline-block bg-blue-600 text-white text-xl font-bold px-8 py-4 rounded-full hover:bg-blue-700 transition-colors duration-300 shadow-lg transform hover:scale-105">
                        Agendar Agora!
                    </a>
                    <p class="text-sm text-gray-500 mt-4">
                        (Substitua "YOUR_CALENDAR_LINK" pelo seu link real do Google Agenda de agendamento)
                    </p>
                </div>
            </section>

        </main>
    </div>

    <footer class="text-center text-gray-600 py-4 mt-auto">
        <p>&copy; 2024 English Journey. Todos os direitos reservados.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            const exerciseListView = document.getElementById('exercise-list-view');
            const individualExerciseView = document.getElementById('individual-exercise-view');
            const backToExerciseListBtn = document.getElementById('back-to-exercise-list-btn');
            const exerciseSelectLinks = document.querySelectorAll('.exercise-select-link');
            const individualExerciseContents = document.querySelectorAll('.individual-exercise-content');

            // Function to show a specific content section (from sidebar)
            const showSection = (id) => {
                contentSections.forEach(section => {
                    section.classList.remove('active');
                });
                navLinks.forEach(link => {
                    link.classList.remove('active');
                });
                document.getElementById(id).classList.add('active');
                document.querySelector(`.nav-link[href="#${id}"]`).classList.add('active');

                // If navigating to exercises, ensure the correct view is shown
                if (id === 'exercises') {
                    // If a specific exercise is in the hash, show it
                    const currentHash = window.location.hash.substring(1);
                    if (currentHash && document.getElementById(currentHash) && document.getElementById(currentHash).classList.contains('individual-exercise-content')) {
                        displayIndividualExercise(currentHash);
                    } else {
                        // Otherwise, show the list of exercises
                        displayExerciseList();
                    }
                } else {
                    // For other sections, clear any exercise-specific hash
                    history.replaceState(null, '', window.location.pathname + window.location.search);
                }
            };

            // Function to display the list of exercises
            const displayExerciseList = () => {
                individualExerciseView.classList.add('hidden');
                exerciseListView.classList.remove('hidden');
                // Clear hash when returning to list view
                history.replaceState(null, '', window.location.pathname + window.location.search);
            };

            // Function to display a specific individual exercise
            const displayIndividualExercise = (exerciseId) => {
                exerciseListView.classList.add('hidden');
                individualExerciseView.classList.remove('hidden');

                individualExerciseContents.forEach(exercise => {
                    exercise.classList.add('hidden');
                });

                const targetExercise = document.getElementById(exerciseId);
                if (targetExercise) {
                    targetExercise.classList.remove('hidden');
                }
                
                // Update URL hash for sharing
                history.replaceState(null, '', `#${exerciseId}`);
            };

            // Event listeners for navigation links in sidebar
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = e.target.getAttribute('href').substring(1);
                    showSection(targetId);
                });
            });

            // Event listeners for exercise selection links (within exercises section)
            exerciseSelectLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetExerciseId = e.target.getAttribute('href').substring(1);
                    displayIndividualExercise(targetExerciseId);
                });
            });

            // Event listener for "Back to Exercise List" button
            backToExerciseListBtn.addEventListener('click', () => {
                displayExerciseList();
            });

            // Initial section load based on URL hash or default
            const initialHash = window.location.hash.substring(1);
            if (initialHash && document.getElementById(initialHash) && document.getElementById(initialHash).classList.contains('content-section')) {
                showSection(initialHash);
            } else if (initialHash && document.getElementById(initialHash) && document.getElementById(initialHash).classList.contains('individual-exercise-content')) {
                // If the hash is an individual exercise, show the exercises section and then the specific exercise
                showSection('exercises');
                displayIndividualExercise(initialHash);
            }
            else {
                showSection('exercises'); // Default to exercises section
            }


            // --- Centralized Exercise Data ---
            const allExerciseData = {
                'say-tell': {
                    inputs: [
                        { id: 'saytell-q1', answer: 'tell', explanation: 'Use "tell" when you specify the person being spoken to (tell me, tell him, tell a story, tell the truth).' },
                        { id: 'saytell-q2', answer: 'tells', explanation: 'Use "tell" when you specify the person being spoken to, or for common expressions like "tell the truth". Remember the "s" for third person singular (she).' },
                        { id: 'saytell-q3', answer: 'speak', explanation: 'Use "speak" when talking about formal communication or general ability to communicate. "Speak with" or "speak to" is common.' },
                        { id: 'saytell-q4', answer: 'said', explanation: 'Use "say" for direct speech or when the focus is on the words spoken, not who is being spoken to. The past tense of "say" is "said".' }
                    ]
                },
                'do-does': {
                    inputs: [
                        { id: 'dodoes-q1', answer: 'do', explanation: 'Use "do" for most subjects in questions and negative statements in the Simple Present (I, you, we, they).' },
                        { id: 'dodoes-q2', answer: 'does', explanation: 'Use "does" for third person singular subjects (he, she, it) in questions and negative statements in the Simple Present.' },
                        { id: 'dodoes-q3', answer: 'does', explanation: 'Similar to the previous rule, "does" is used for the third person singular subject "he" in questions.' }
                    ]
                }
                // Add data for new exercises here, using unique IDs for inputs
            };

            // --- General Function to Setup Exercise Logic ---
            const setupExerciseLogic = (exerciseId) => {
                const exerciseContainer = document.getElementById(`exercise-${exerciseId}`);
                if (!exerciseContainer) return;

                const checkButton = exerciseContainer.querySelector(`.check-exercise-button[data-exercise-id="${exerciseId}"]`);
                const copyButton = exerciseContainer.querySelector(`.copy-exercise-results-button[data-exercise-id="${exerciseId}"]`);
                const feedbackDiv = exerciseContainer.querySelector('.exercise-feedback');
                const copyMessageDiv = exerciseContainer.querySelector('.exercise-copy-message');

                if (!checkButton || !copyButton || !feedbackDiv || !copyMessageDiv) return; // Ensure all elements exist

                const exerciseAnswers = allExerciseData[exerciseId].inputs;

                checkButton.addEventListener('click', () => {
                    let feedbackHtml = '<h4 class="font-bold text-lg mb-2">Seus Resultados:</h4>';
                    let resultsToCopy = `Resultados do Exercício "${exerciseContainer.querySelector('h3').textContent}":\n\n`;
                    let allCorrect = true;

                    exerciseAnswers.forEach(qData => {
                        const inputElement = document.getElementById(qData.id);
                        const userAnswer = inputElement.value.trim().toLowerCase();
                        const correctAnswer = qData.answer;
                        const explanation = qData.explanation;
                        const questionText = document.querySelector(`label[for="${qData.id}"]`).textContent.replace(/^\d+\.\s*(.*?)\s*$/, '$1').replace('______', '____');

                        let status = '';
                        if (userAnswer === correctAnswer) {
                            status = '<span class="text-green-600">Correto!</span>';
                            resultsToCopy += `Questão: ${questionText}\nSua Resposta: ${userAnswer} (Correto)\n\n`;
                        } else {
                            status = `<span class="text-red-600">Incorreto.</span> Resposta correta: <strong>${correctAnswer}</strong>.`;
                            resultsToCopy += `Questão: ${questionText}\nSua Resposta: ${userAnswer} (Incorreto). Resposta Correta: ${correctAnswer}\nExplicação: ${explanation}\n\n`;
                            allCorrect = false;
                        }

                        feedbackHtml += `
                            <p class="mb-2">
                                <strong>${questionText}</strong> <br>
                                Sua resposta: "${userAnswer}" - ${status}
                            </p>
                            <p class="text-sm text-gray-600 ml-4 mb-3">${explanation}</p>
                        `;
                    });

                    if (allCorrect) {
                        feedbackHtml = `<p class="text-xl font-bold text-green-700 mb-4">Parabéns! Você acertou todas as questões!</p>` + feedbackHtml;
                    }

                    feedbackDiv.innerHTML = feedbackHtml;
                    feedbackDiv.classList.remove('hidden');
                    copyButton.dataset.results = resultsToCopy; // Store results for copying
                    copyButton.classList.remove('hidden');
                    copyMessageDiv.classList.add('hidden'); // Hide previous message
                });

                copyButton.addEventListener('click', () => {
                    const results = copyButton.dataset.results;
                    if (results) {
                        try {
                            const tempTextArea = document.createElement('textarea');
                            tempTextArea.value = results;
                            document.body.appendChild(tempTextArea);
                            tempTextArea.select();
                            document.execCommand('copy');
                            document.body.removeChild(tempTextArea);
                            copyMessageDiv.textContent = 'Resultados copiados para a área de transferência!';
                            copyMessageDiv.classList.remove('hidden');
                            copyMessageDiv.classList.remove('text-red-700');
                            copyMessageDiv.classList.add('text-green-700');
                        } catch (err) {
                            console.error('Erro ao copiar: ', err);
                            copyMessageDiv.textContent = 'Erro ao copiar resultados. Por favor, tente novamente.';
                            copyMessageDiv.classList.remove('hidden');
                            copyMessageDiv.classList.remove('text-green-700');
                            copyMessageDiv.classList.add('text-red-700');
                        }
                    }
                });
            };

            // Setup logic for all interactive exercises
            for (const key in allExerciseData) {
                setupExerciseLogic(key);
            }

            // --- Proficiency Test Logic (remains separate from general exercises) ---
            const quizQuestions = [
                {
                    question: "1. He ______ to the gym every day.",
                    options: ["goes", "go", "going"],
                    correctAnswer: "goes",
                    explanation: "Para a terceira pessoa do singular (he, she, it) no Present Simple, adicionamos '-es' a verbos terminados em -o, -s, -sh, -ch, -x, -z."
                },
                {
                    question: "2. \"Could you please ______ me the time?\"",
                    options: ["say", "tell", "speak"],
                    correctAnswer: "tell",
                    explanation: "Usamos 'tell' quando especificamos a pessoa para quem estamos falando (tell me, tell him, tell a story). 'Say' é usado para o que é dito, sem especificar o ouvinte."
                },
                {
                    question: "3. They ______ their homework yet.",
                    options: ["haven't finished", "didn't finish", "not finished"],
                    correctAnswer: "haven't finished",
                    explanation: "'Yet' (ainda) é frequentemente usado com o Present Perfect para indicar que algo não aconteceu até o momento presente. 'Didn't finish' seria para uma ação concluída no passado."
                },
                {
                    question: "4. If I ______ a bird, I ______ fly.",
                    options: ["was / would", "were / would", "am / will"],
                    correctAnswer: "were / would",
                    explanation: "Esta é uma frase condicional de tipo 2 (Second Conditional), usada para situações hipotéticas ou irreais no presente ou futuro. Para todos os sujeitos no 'if clause' com o verbo 'to be', usamos 'were'."
                },
                {
                    question: "5. She's a doctor, ______?",
                    options: ["isn't she", "doesn't she", "is she"],
                    correctAnswer: "isn't she",
                    explanation: "Esta é uma Question Tag. A regra geral é usar o auxiliar inverso do verbo principal. Como 'she's' é uma contração de 'she is', o auxiliar é 'is', e a tag se torna 'isn't she'."
                }
            ];

            const proficiencyQuizForm = document.getElementById('proficiency-quiz');
            const testResultsDiv = document.getElementById('test-results');
            const copyTestResultsBtn = document.getElementById('copy-test-results');
            const testCopyMessage = document.getElementById('test-copy-message');

            if (proficiencyQuizForm) { // Ensure the form exists before adding listener
                proficiencyQuizForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    let score = 0;
                    let resultsHtml = '<h4 class="font-bold text-lg mb-2">Resultados do Teste de Nível:</h4>';
                    let resultsToCopy = 'Resultados do Teste de Nível de Proficiência:\n\n';

                    quizQuestions.forEach((q, index) => {
                        const questionName = `q${index + 1}`;
                        const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);
                        const userAnswer = selectedOption ? selectedOption.value : 'Não respondida';
                        const isCorrect = userAnswer === q.correctAnswer;

                        if (isCorrect) {
                            score++;
                            resultsHtml += `<p class="mb-2"><strong>${q.question}</strong> Sua resposta: "${userAnswer}" - <span class="text-green-600">Correto!</span></p>`;
                            resultsToCopy += `Questão ${index + 1}: ${q.question}\nSua Resposta: "${userAnswer}" (Correto)\n\n`;
                        } else {
                            resultsHtml += `
                                <p class="mb-2">
                                    <strong>${q.question}</strong> <br>
                                    Sua resposta: "${userAnswer}" - <span class="text-red-600">Incorreto.</span> Resposta correta: <strong>${q.correctAnswer}</strong>.
                                </p>
                                <p class="text-sm text-gray-600 ml-4 mb-3">${q.explanation}</p>
                            `;
                            resultsToCopy += `Questão ${index + 1}: ${q.question}\nSua Resposta: "${userAnswer}" (Incorreto). Resposta Correta: "${q.correctAnswer}"\nExplicação: ${q.explanation}\n\n`;
                        }
                    });

                    const totalQuestions = quizQuestions.length;
                    const percentage = (score / totalQuestions) * 100;
                    let levelSuggestion = '';

                    if (percentage >= 90) {
                        levelSuggestion = 'Avançado (C1/C2)';
                    } else if (percentage >= 70) {
                        levelSuggestion = 'Intermediário Avançado (B2)';
                    } else if (percentage >= 50) {
                        levelSuggestion = 'Intermediário (B1)';
                    } else if (percentage >= 30) {
                        levelSuggestion = 'Pré-Intermediário (A2)';
                    } else {
                        levelSuggestion = 'Básico (A1)';
                    }

                    const finalResultText = `Você acertou ${score} de ${totalQuestions} questões (${percentage.toFixed(0)}%).\nNível Sugerido: ${levelSuggestion}.\n\n`;
                    resultsHtml = `<p class="text-xl font-bold text-blue-700 mb-4">${finalResultText}</p>` + resultsHtml;
                    resultsToCopy = finalResultText + resultsToCopy;

                    testResultsDiv.innerHTML = resultsHtml;
                    testResultsDiv.classList.remove('hidden');
                    copyTestResultsBtn.dataset.results = resultsToCopy;
                    copyTestResultsBtn.classList.remove('hidden');
                    testCopyMessage.classList.add('hidden'); // Hide previous message
                });

                copyTestResultsBtn.addEventListener('click', () => {
                    const results = copyTestResultsBtn.dataset.results;
                    if (results) {
                        try {
                            const tempTextArea = document.createElement('textarea');
                            tempTextArea.value = results;
                            document.body.appendChild(tempTextArea);
                            tempTextArea.select();
                            document.execCommand('copy');
                            document.body.removeChild(tempTextArea);
                            testCopyMessage.classList.remove('hidden');
                        } catch (err) {
                            console.error('Erro ao copiar: ', err);
                            testCopyMessage.textContent = 'Erro ao copiar resultados. Por favor, tente novamente.';
                            testCopyMessage.classList.remove('hidden');
                            testCopyMessage.classList.remove('text-green-700');
                            testCopyMessage.classList.add('text-red-700');
                        }
                    }
                });
            } // End of proficiencyQuizForm check

        });
    </script>
</body>
</html>
